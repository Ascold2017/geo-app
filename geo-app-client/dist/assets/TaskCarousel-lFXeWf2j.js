import{r as n,j as e}from"./index-_tGX61Hg.js";import"./taskCard-DkDUiVM1.js";import{u as k,C as h,P as C,a as I}from"./index-CWbza1uX.js";function N({task:s,onTapTask:o,className:r}){const[c,u]=n.useState(!1),[i,p]=n.useState(s.repeated>0),{playUrl:l,play:t}=k(s.soundUrl||null);n.useEffect(()=>{l(s.soundUrl)},[s,l]);async function d(){t(),u(!c),i||(await o(s.id),p(!0))}return e.jsx("article",{onClick:d,className:`task-card ${r||""}`,children:e.jsxs("div",{className:"task-card-container",children:[e.jsx(h,{className:"task-card-status",style:{color:i?"green":"red"}}),s.imageUrl&&e.jsx("img",{src:s.imageUrl,className:"task-card-image"}),e.jsx("p",{className:"app-text-1 text-center px-9",children:c?e.jsx("span",{children:s.ru}):e.jsxs("span",{children:[s.ka," [",s.transcription,"]"]})}),e.jsx("button",{title:"Прослушать",disabled:!s.soundUrl,onClick:a=>{a.stopPropagation(),t()},className:"btn task-card-play",children:e.jsx(C,{})})]})})}function b({tasks:s,renderFooter:o}){var d;const[r,c]=n.useState(((d=s[0])==null?void 0:d.id)||null),[u,i]=n.useState(!1),{checkReadedTask:p}=I();function l(){var f;const a=s.sort((x,j)=>x.id>=j.id?1:-1),T=a.findIndex(x=>x.id===r),m=((f=a[T+1])==null?void 0:f.id)||null;m?c(m):i(!0)}const t=s.find(a=>a.id===r);return t?e.jsxs("div",{children:[e.jsx(N,{task:t,onTapTask:p,className:"mb-3"}),o(l,u)]}):null}export{b as T};
