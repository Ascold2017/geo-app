import{j as s,a as o,i as m,k as d,r as p}from"./index-_tGX61Hg.js";import{u as x}from"./index-RKSQp93W.js";import{A as c}from"./AppSpin-C7d-5P7N.js";import{u as g}from"./useRequest-CmBI4CHT.js";import{u as l}from"./index-1O09-V8y.js";import"./index-iJmmzj8p.js";const f=({text:e,color:r,className:i,...a})=>s.jsx("span",{...a,className:`badge badge-${r} ${i||""}`,children:e});function j({topic:e}){const r=o(),i=l(a=>a.user);return s.jsxs("article",{className:m({"card h-full flex-none bg-base-100 shadow-xl mr-3":!0,hoverable:e.isPremium?i.isPremium:!0}),onClick:()=>{(!e.isPremium||i.isPremium)&&r(d(e.id))},children:[s.jsx("figure",{children:s.jsx("img",{alt:"example",src:`https://img.youtube.com/vi/${e.videoId}/hqdefault.jpg`})}),s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[s.jsx("h3",{className:"app-title-3 mt-auto",children:e.title}),s.jsxs("span",{className:"app-text-2",children:[e.progress," %"]})]}),s.jsx(f,{text:"Premium",color:"primary",className:m({"absolute right-3 top-3":!0,hidden:!e.isPremium})})]})]},e.id)}function h(){const{getTopics:e,topics:r}=x(),i=l(n=>n.user),{loading:a,error:t,runAsync:u}=g(e,{manual:!0});return p.useEffect(()=>{i.currentSectionId&&u()},[u,i.currentSectionId]),a&&!r?s.jsx(c,{spinning:!0}):t?s.jsxs("p",{className:"app-text-1",children:["Произошла ошибка: ",t==null?void 0:t.message]}):s.jsxs(s.Fragment,{children:[s.jsx(c,{spinning:a}),s.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:r==null?void 0:r.map(n=>s.jsx(j,{topic:n},n.id))})]})}function A(){return s.jsx(s.Fragment,{children:s.jsx(h,{})})}export{A as default};
