import{r as h}from"./index-_tGX61Hg.js";import{u as re}from"./index-iJmmzj8p.js";var te=function(e){return function(r,n){var t=h.useRef(!1);e(function(){return function(){t.current=!1}},[]),e(function(){if(!t.current)t.current=!0;else return r()},n)}},R=function(){return R=Object.assign||function(r){for(var n,t=1,i=arguments.length;t<i;t++){n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},R.apply(this,arguments)};function J(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(e);i<t.length;i++)r.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(n[t[i]]=e[t[i]]);return n}function ie(e,r,n,t){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function c(s){try{u(t.next(s))}catch(l){o(l)}}function f(s){try{u(t.throw(s))}catch(l){o(l)}}function u(s){s.done?a(s.value):i(s.value).then(c,f)}u((t=t.apply(e,r||[])).next())})}function ue(e,r){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},t,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(u){return function(s){return f([u,s])}}function f(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(t=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=r.call(e,n)}catch(s){u=[6,s],i=0}finally{t=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function b(e,r){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var t=n.call(e),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=t.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(n=t.return)&&n.call(t)}finally{if(o)throw o.error}}return a}function y(e,r,n){if(n||arguments.length===2)for(var t=0,i=r.length,a;t<i;t++)(a||!(t in r))&&(a||(a=Array.prototype.slice.call(r,0,t)),a[t]=r[t]);return e.concat(a||Array.prototype.slice.call(r))}var ae=function(e){return typeof e=="function"};function x(e){var r=h.useRef(e);r.current=h.useMemo(function(){return e},[e]);var n=h.useRef();return n.current||(n.current=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return r.current.apply(this,t)}),n.current}const I=te(h.useEffect);var K=function(e,r){var n=r.manual,t=r.ready,i=t===void 0?!0:t,a=r.defaultParams,o=a===void 0?[]:a,c=r.refreshDeps,f=c===void 0?[]:c,u=r.refreshDepsAction,s=h.useRef(!1);return s.current=!1,I(function(){!n&&i&&(s.current=!0,e.run.apply(e,y([],b(o),!1)))},[i]),I(function(){s.current||n||(s.current=!0,u?u():e.refresh())},y([],b(f),!1)),{onBefore:function(){if(!i)return{stopNow:!0}}}};K.onInit=function(e){var r=e.ready,n=r===void 0?!0:r,t=e.manual;return{loading:!t&&n}};const oe=K;function ce(e,r){if(e===r)return!0;for(var n=0;n<e.length;n++)if(!Object.is(e[n],r[n]))return!1;return!0}function Q(e,r){var n=h.useRef({deps:r,obj:void 0,initialized:!1}).current;return(n.initialized===!1||!ce(n.deps,r))&&(n.deps=r,n.obj=e(),n.initialized=!0),n.obj}function Y(e){var r=h.useRef(e);return r.current=e,r}var U=function(e){var r=Y(e);h.useEffect(function(){return function(){r.current()}},[])},L=new Map,fe=function(e,r,n){var t=L.get(e);t!=null&&t.timer&&clearTimeout(t.timer);var i=void 0;r>-1&&(i=setTimeout(function(){L.delete(e)},r)),L.set(e,R(R({},n),{timer:i}))},se=function(e){return L.get(e)},M=new Map,le=function(e){return M.get(e)},de=function(e,r){M.set(e,r),r.then(function(n){return M.delete(e),n}).catch(function(){M.delete(e)})},j={},ve=function(e,r){j[e]&&j[e].forEach(function(n){return n(r)})},_=function(e,r){return j[e]||(j[e]=[]),j[e].push(r),function(){var t=j[e].indexOf(r);j[e].splice(t,1)}},ge=function(e,r){var n=r.cacheKey,t=r.cacheTime,i=t===void 0?5*60*1e3:t,a=r.staleTime,o=a===void 0?0:a,c=r.setCache,f=r.getCache,u=h.useRef(),s=h.useRef(),l=function(d,v){c?c(v):fe(d,i,v),ve(d,v.data)},m=function(d,v){return v===void 0&&(v=[]),f?f(v):se(d)};return Q(function(){if(n){var d=m(n);d&&Object.hasOwnProperty.call(d,"data")&&(e.state.data=d.data,e.state.params=d.params,(o===-1||new Date().getTime()-d.time<=o)&&(e.state.loading=!1)),u.current=_(n,function(v){e.setState({data:v})})}},[]),U(function(){var d;(d=u.current)===null||d===void 0||d.call(u)}),n?{onBefore:function(d){var v=m(n,d);return!v||!Object.hasOwnProperty.call(v,"data")?{}:o===-1||new Date().getTime()-v.time<=o?{loading:!1,data:v==null?void 0:v.data,error:void 0,returnNow:!0}:{data:v==null?void 0:v.data,error:void 0}},onRequest:function(d,v){var p=le(n);return p&&p!==s.current?{servicePromise:p}:(p=d.apply(void 0,y([],b(v),!1)),s.current=p,de(n,p),{servicePromise:p})},onSuccess:function(d,v){var p;n&&((p=u.current)===null||p===void 0||p.call(u),l(n,{data:d,params:v,time:new Date().getTime()}),u.current=_(n,function(S){e.setState({data:S})}))},onMutate:function(d){var v;n&&((v=u.current)===null||v===void 0||v.call(u),l(n,{data:d,params:e.state.params,time:new Date().getTime()}),u.current=_(n,function(p){e.setState({data:p})}))}}:{}};const he=ge;var me=typeof global=="object"&&global&&global.Object===Object&&global,pe=typeof self=="object"&&self&&self.Object===Object&&self,Z=me||pe||Function("return this")(),D=Z.Symbol,ee=Object.prototype,be=ee.hasOwnProperty,ye=ee.toString,$=D?D.toStringTag:void 0;function we(e){var r=be.call(e,$),n=e[$];try{e[$]=void 0;var t=!0}catch{}var i=ye.call(e);return t&&(r?e[$]=n:delete e[$]),i}var Te=Object.prototype,Pe=Te.toString;function Re(e){return Pe.call(e)}var Oe="[object Null]",Se="[object Undefined]",G=D?D.toStringTag:void 0;function je(e){return e==null?e===void 0?Se:Oe:G&&G in Object(e)?we(e):Re(e)}function Ee(e){return e!=null&&typeof e=="object"}var xe="[object Symbol]";function Ce(e){return typeof e=="symbol"||Ee(e)&&je(e)==xe}var Ae=/\s/;function $e(e){for(var r=e.length;r--&&Ae.test(e.charAt(r)););return r}var Fe=/^\s+/;function We(e){return e&&e.slice(0,$e(e)+1).replace(Fe,"")}function B(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var X=NaN,Le=/^[-+]0x[0-9a-f]+$/i,Me=/^0b[01]+$/i,De=/^0o[0-7]+$/i,Be=parseInt;function V(e){if(typeof e=="number")return e;if(Ce(e))return X;if(B(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=B(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=We(e);var n=Me.test(e);return n||De.test(e)?Be(e.slice(2),n?2:8):Le.test(e)?X:+e}var H=function(){return Z.Date.now()},Ne="Expected a function",_e=Math.max,He=Math.min;function ne(e,r,n){var t,i,a,o,c,f,u=0,s=!1,l=!1,m=!0;if(typeof e!="function")throw new TypeError(Ne);r=V(r)||0,B(n)&&(s=!!n.leading,l="maxWait"in n,a=l?_e(V(n.maxWait)||0,r):a,m="trailing"in n?!!n.trailing:m);function d(g){var T=t,P=i;return t=i=void 0,u=g,o=e.apply(P,T),o}function v(g){return u=g,c=setTimeout(O,r),s?d(g):o}function p(g){var T=g-f,P=g-u,k=r-T;return l?He(k,a-P):k}function S(g){var T=g-f,P=g-u;return f===void 0||T>=r||T<0||l&&P>=a}function O(){var g=H();if(S(g))return C(g);c=setTimeout(O,p(g))}function C(g){return c=void 0,m&&t?d(g):(t=i=void 0,o)}function A(){c!==void 0&&clearTimeout(c),u=0,t=f=i=c=void 0}function E(){return c===void 0?o:C(H())}function w(){var g=H(),T=S(g);if(t=arguments,i=this,f=g,T){if(c===void 0)return v(f);if(l)return clearTimeout(c),c=setTimeout(O,r),d(f)}return c===void 0&&(c=setTimeout(O,r)),o}return w.cancel=A,w.flush=E,w}var Ie="Expected a function";function Ue(e,r,n){var t=!0,i=!0;if(typeof e!="function")throw new TypeError(Ie);return B(n)&&(t="leading"in n?!!n.leading:t,i="trailing"in n?!!n.trailing:i),ne(e,r,{leading:t,maxWait:r,trailing:i})}var ze=function(e,r){var n=r.debounceWait,t=r.debounceLeading,i=r.debounceTrailing,a=r.debounceMaxWait,o=h.useRef(),c=h.useMemo(function(){var f={};return t!==void 0&&(f.leading=t),i!==void 0&&(f.trailing=i),a!==void 0&&(f.maxWait=a),f},[t,i,a]);return h.useEffect(function(){if(n){var f=e.runAsync.bind(e);return o.current=ne(function(u){u()},n,c),e.runAsync=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return new Promise(function(l,m){var d;(d=o.current)===null||d===void 0||d.call(o,function(){f.apply(void 0,y([],b(u),!1)).then(l).catch(m)})})},function(){var u;(u=o.current)===null||u===void 0||u.cancel(),e.runAsync=f}}},[n,c]),n?{onCancel:function(){var f;(f=o.current)===null||f===void 0||f.cancel()}}:{}};const ke=ze;var Ge=function(e,r){var n=r.loadingDelay,t=r.ready,i=h.useRef();if(!n)return{};var a=function(){i.current&&clearTimeout(i.current)};return{onBefore:function(){return a(),t!==!1&&(i.current=setTimeout(function(){e.setState({loading:!0})},n)),{loading:!1}},onFinally:function(){a()},onCancel:function(){a()}}};const Xe=Ge;var N=!!(typeof window<"u"&&window.document&&window.document.createElement);function z(){return N?document.visibilityState!=="hidden":!0}var F=[];function Ve(e){return F.push(e),function(){var n=F.indexOf(e);F.splice(n,1)}}if(N){var qe=function(){if(z())for(var e=0;e<F.length;e++){var r=F[e];r()}};window.addEventListener("visibilitychange",qe,!1)}var Je=function(e,r){var n=r.pollingInterval,t=r.pollingWhenHidden,i=t===void 0?!0:t,a=r.pollingErrorRetryCount,o=a===void 0?-1:a,c=h.useRef(),f=h.useRef(),u=h.useRef(0),s=function(){var l;c.current&&clearTimeout(c.current),(l=f.current)===null||l===void 0||l.call(f)};return I(function(){n||s()},[n]),n?{onBefore:function(){s()},onError:function(){u.current+=1},onSuccess:function(){u.current=0},onFinally:function(){o===-1||o!==-1&&u.current<=o?c.current=setTimeout(function(){!i&&!z()?f.current=Ve(function(){e.refresh()}):e.refresh()},n):u.current=0},onCancel:function(){s()}}:{}};const Ke=Je;function Qe(e,r){var n=!1;return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];n||(n=!0,e.apply(void 0,y([],b(t),!1)),setTimeout(function(){n=!1},r))}}function Ye(){return N&&typeof navigator.onLine<"u"?navigator.onLine:!0}var W=[];function Ze(e){return W.push(e),function(){var n=W.indexOf(e);n>-1&&W.splice(n,1)}}if(N){var q=function(){if(!(!z()||!Ye()))for(var e=0;e<W.length;e++){var r=W[e];r()}};window.addEventListener("visibilitychange",q,!1),window.addEventListener("focus",q,!1)}var en=function(e,r){var n=r.refreshOnWindowFocus,t=r.focusTimespan,i=t===void 0?5e3:t,a=h.useRef(),o=function(){var c;(c=a.current)===null||c===void 0||c.call(a)};return h.useEffect(function(){if(n){var c=Qe(e.refresh.bind(e),i);a.current=Ze(function(){c()})}return function(){o()}},[n,i]),U(function(){o()}),{}};const nn=en;var rn=function(e,r){var n=r.retryInterval,t=r.retryCount,i=h.useRef(),a=h.useRef(0),o=h.useRef(!1);return t?{onBefore:function(){o.current||(a.current=0),o.current=!1,i.current&&clearTimeout(i.current)},onSuccess:function(){a.current=0},onError:function(){if(a.current+=1,t===-1||a.current<=t){var c=n??Math.min(1e3*Math.pow(2,a.current),3e4);i.current=setTimeout(function(){o.current=!0,e.refresh()},c)}else a.current=0},onCancel:function(){a.current=0,i.current&&clearTimeout(i.current)}}:{}};const tn=rn;var un=function(e,r){var n=r.throttleWait,t=r.throttleLeading,i=r.throttleTrailing,a=h.useRef(),o={};return t!==void 0&&(o.leading=t),i!==void 0&&(o.trailing=i),h.useEffect(function(){if(n){var c=e.runAsync.bind(e);return a.current=Ue(function(f){f()},n,o),e.runAsync=function(){for(var f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];return new Promise(function(s,l){var m;(m=a.current)===null||m===void 0||m.call(a,function(){c.apply(void 0,y([],b(f),!1)).then(s).catch(l)})})},function(){var f;e.runAsync=c,(f=a.current)===null||f===void 0||f.cancel()}}},[n,t,i]),n?{onCancel:function(){var c;(c=a.current)===null||c===void 0||c.cancel()}}:{}};const an=un;var on=function(){var e=b(h.useState({}),2),r=e[1];return h.useCallback(function(){return r({})},[])},cn=function(){function e(r,n,t,i){i===void 0&&(i={}),this.serviceRef=r,this.options=n,this.subscribe=t,this.initState=i,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=R(R(R({},this.state),{loading:!n.manual}),i)}return e.prototype.setState=function(r){r===void 0&&(r={}),this.state=R(R({},this.state),r),this.subscribe()},e.prototype.runPluginHandler=function(r){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var i=this.pluginImpls.map(function(a){var o;return(o=a[r])===null||o===void 0?void 0:o.call.apply(o,y([a],b(n),!1))}).filter(Boolean);return Object.assign.apply(Object,y([{}],b(i),!1))},e.prototype.runAsync=function(){for(var r,n,t,i,a,o,c,f,u,s,l=[],m=0;m<arguments.length;m++)l[m]=arguments[m];return ie(this,void 0,void 0,function(){var d,v,p,S,O,C,A,E,w,g,T;return ue(this,function(P){switch(P.label){case 0:if(this.count+=1,d=this.count,v=this.runPluginHandler("onBefore",l),p=v.stopNow,S=p===void 0?!1:p,O=v.returnNow,C=O===void 0?!1:O,A=J(v,["stopNow","returnNow"]),S)return[2,new Promise(function(){})];if(this.setState(R({loading:!0,params:l},A)),C)return[2,Promise.resolve(A.data)];(n=(r=this.options).onBefore)===null||n===void 0||n.call(r,l),P.label=1;case 1:return P.trys.push([1,3,,4]),E=this.runPluginHandler("onRequest",this.serviceRef.current,l).servicePromise,E||(E=(T=this.serviceRef).current.apply(T,y([],b(l),!1))),[4,E];case 2:return w=P.sent(),d!==this.count?[2,new Promise(function(){})]:(this.setState({data:w,error:void 0,loading:!1}),(i=(t=this.options).onSuccess)===null||i===void 0||i.call(t,w,l),this.runPluginHandler("onSuccess",w,l),(o=(a=this.options).onFinally)===null||o===void 0||o.call(a,l,w,void 0),d===this.count&&this.runPluginHandler("onFinally",l,w,void 0),[2,w]);case 3:if(g=P.sent(),d!==this.count)return[2,new Promise(function(){})];throw this.setState({error:g,loading:!1}),(f=(c=this.options).onError)===null||f===void 0||f.call(c,g,l),this.runPluginHandler("onError",g,l),(s=(u=this.options).onFinally)===null||s===void 0||s.call(u,l,void 0,g),d===this.count&&this.runPluginHandler("onFinally",l,void 0,g),g;case 4:return[2]}})})},e.prototype.run=function(){for(var r=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.runAsync.apply(this,y([],b(n),!1)).catch(function(i){r.options.onError||console.error(i)})},e.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},e.prototype.refresh=function(){this.run.apply(this,y([],b(this.state.params||[]),!1))},e.prototype.refreshAsync=function(){return this.runAsync.apply(this,y([],b(this.state.params||[]),!1))},e.prototype.mutate=function(r){var n=ae(r)?r(this.state.data):r;this.runPluginHandler("onMutate",n),this.setState({data:n})},e}();const fn=cn;function sn(e,r,n){r===void 0&&(r={}),n===void 0&&(n=[]);var t=r.manual,i=t===void 0?!1:t,a=J(r,["manual"]),o=R({manual:i},a),c=Y(e),f=on(),u=Q(function(){var s=n.map(function(l){var m;return(m=l==null?void 0:l.onInit)===null||m===void 0?void 0:m.call(l,o)}).filter(Boolean);return new fn(c,o,f,Object.assign.apply(Object,y([{}],b(s),!1)))},[]);return u.options=o,u.pluginImpls=n.map(function(s){return s(u,o)}),re(function(){if(!i){var s=u.state.params||r.defaultParams||[];u.run.apply(u,y([],b(s),!1))}}),U(function(){u.cancel()}),{loading:u.state.loading,data:u.state.data,error:u.state.error,params:u.state.params||[],cancel:x(u.cancel.bind(u)),refresh:x(u.refresh.bind(u)),refreshAsync:x(u.refreshAsync.bind(u)),run:x(u.run.bind(u)),runAsync:x(u.runAsync.bind(u)),mutate:x(u.mutate.bind(u))}}function vn(e,r,n){return sn(e,r,y(y([],b(n||[]),!1),[ke,Xe,Ke,nn,an,oe,he,tn],!1))}export{vn as u};
