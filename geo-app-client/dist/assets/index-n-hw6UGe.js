import{j as e,L as A,r as o,A as u,_ as m,c as N,a as O,d as f,e as p,f as z,g as M,O as y,T as C,P as H,h as T}from"./index-_tGX61Hg.js";import{B as k,M as g,i as V}from"./lib-CW0_tRxQ.js";import{u as j}from"./index-iJmmzj8p.js";import{A as P}from"./AppSpin-C7d-5P7N.js";import{u as d}from"./index-BMMfHKV0.js";import{u as h}from"./index-1O09-V8y.js";import{R}from"./RiseOutlined-BlEfrd_c.js";function E({children:t,activator:n,className:s,...c}){return e.jsxs("details",{className:`dropdown dropdown-end ${s}`,...c,children:[e.jsx("summary",{className:"m-1 btn btn-ghost",children:n}),e.jsx("div",{className:"dropdown-content z-10",children:t})]})}const v=({items:t,mobile:n,className:s,...c})=>e.jsx("ul",{className:`menu menu-horizontal ${s||""}`,...c,children:t.map((a,i)=>e.jsx("li",{children:e.jsxs(A,{to:a.link,children:[n&&a.icon," ",a.title]})},i))}),L=({items:t,value:n,onChange:s,className:c,...a})=>e.jsx("select",{className:`select w-full max-w-xs ${c||""}`,...a,value:n,onChange:i=>s(i.target.value),children:t.map((i,r)=>e.jsx("option",{value:i.value,children:i.title},r))});var $={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zm-280 0c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}},{tag:"path",attrs:{d:"M894 345a343.92 343.92 0 00-189-130v.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l.8 132.6c0 3.2.5 6.4 1.5 9.4a31.95 31.95 0 0040.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-.5.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102zm505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-.2-.1A367.31 367.31 0 00729 676c76.4-105.3 88.8-237.6 44.4-350.4l.6.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"}},{tag:"path",attrs:{d:"M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}}]},name:"comment",theme:"outlined"};const U=$;var _=function(n,s){return o.createElement(u,m({},n,{ref:s,icon:U}))};const I=o.forwardRef(_);var B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1a110.96 110.96 0 00-79.1-32.8zm412.3 235.5l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9a32.03 32.03 0 009.3-35.2l-.9-2.6a442.5 442.5 0 00-79.6-137.7l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52-9.4-106.8-9.4-158.8 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.3a353.44 353.44 0 00-98.9 57.3l-81.8-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a445.93 445.93 0 00-79.6 137.7l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3a32.05 32.05 0 0025.8 25.7l2.7.5a448.27 448.27 0 00158.8 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l.9-2.6c4.3-12.4.6-26.3-9.5-35zm-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z"}}]},name:"setting",theme:"filled"};const F=B;var G=function(n,s){return o.createElement(u,m({},n,{ref:s,icon:F}))};const q=o.forwardRef(G);var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};const J=D;var K=function(n,s){return o.createElement(u,m({},n,{ref:s,icon:J}))};const Q=o.forwardRef(K);function W(){const t=d(a=>a.logout),n=N(a=>a.openConfirm),s=O();function c(){n({title:"Выход",text:"Вы уверены, что хотите выйти?",okText:"Да",cancelText:"Нет",onOk:()=>{t(),s(f)}})}return e.jsx("button",{onClick:c,className:"btn btn-error block w-full",children:"Выйти"})}const X=async()=>(await p({url:"/learn/sections"})).data,b=z((t,n)=>({loaded:!1,sections:[],getSectionsOnce:async()=>{if(n().loaded)return;const s=await X();t({sections:s,loaded:!0})}})),Y=()=>async t=>(await p({method:"POST",url:"/learn/change-section",data:{sectionId:t}})).data,S=()=>{async function t(n){await Y()(n)}return{changeSection:t}};function Z(){const t=h(a=>a.user),{sections:n,getSectionsOnce:s}=b(),{changeSection:c}=S();return j(()=>{s()}),t?e.jsx(L,{value:t.currentSectionId,onChange:a=>c(+a),items:n.map(a=>({title:a.title,value:a.id}))}):null}function ee(){const[t,n]=o.useState(!1),{sections:s,getSectionsOnce:c}=b(),{changeSection:a}=S(),i=d(l=>l.isAuth),r=h(l=>l.user);async function w(l){a(l),n(!1)}return o.useEffect(()=>{i&&(c(),r.currentSectionId||n(!0))},[r,c,i]),e.jsxs(M,{value:t,children:[e.jsx("div",{className:"app-title-3 text-center mb-3",children:"Выберите секцию, которую хотите изучить"}),s.map(l=>e.jsx("button",{className:"btn block w-full mb-3",onClick:()=>w(l.id),children:l.title},l.id))]})}function x(){const t=h(n=>n.user);return e.jsx(E,{activator:e.jsx(q,{}),children:e.jsxs("div",{className:"card w-56 bg-base-100 px-3 py-3 z-10",children:[e.jsxs("div",{className:"app-text-2 text-white",children:["Пользователь: ",t==null?void 0:t.username]}),e.jsxs("div",{className:"app-text-2 text-white mb-3",children:["Аккаунт: ",t!=null&&t.isPremium?"Premium":"Обычный"]}),e.jsx(Z,{}),e.jsx("div",{className:"divider"}),e.jsx(W,{})]})})}function te({menuList:t}){return e.jsxs("header",{className:"navbar bg-primary text-white",children:[e.jsxs(k,{className:"flex items-center w-full",children:[e.jsx("img",{src:"/favicon-32x32.png",className:"block mr-3"}),e.jsx("h2",{className:"app-title-2",children:"GEO App"}),e.jsx(v,{items:t,className:"flex-1"}),e.jsx(x,{})]}),e.jsxs(g,{className:"flex items-center w-full",children:[e.jsx("img",{src:"/favicon-32x32.png",className:"block mr-3"}),e.jsx("h2",{className:"app-title-2",children:"GEO App"}),e.jsx("span",{className:"ml-auto"}),e.jsx(x,{})]})]})}function ne({menuList:t}){return e.jsx(g,{className:"navbar navbar-center bg-primary text-white fixed bottom-0 justify-center",children:e.jsx(v,{mobile:!0,items:t})})}function ue(){const t=d();j(()=>n());async function n(){await t.checkAuth()||(location.href=f)}const s=[{title:"Темы",link:C,icon:e.jsx(Q,{})},{title:"Практика",link:H,icon:e.jsx(I,{})},{title:"Прогресс",link:T,icon:e.jsx(R,{})}];return e.jsxs(e.Fragment,{children:[e.jsx(te,{menuList:s}),e.jsxs("main",{className:`container mx-auto py-3 px-3 ${V&&"py-16"}`,children:[t.isAuth?e.jsx(y,{}):e.jsx(P,{spinning:!0}),e.jsx(ee,{})]}),e.jsx(ne,{menuList:s})]})}export{ue as default};
